<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>help编辑器</title>
    <script type="text/javascript" charset="utf-8" src="ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="ueditor.all.min.js"> </script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="lang/zh-cn/zh-cn.js"></script>
    <style type="text/css">
        div{
            width:100%;
        }
    </style>
</head>
<body>
    <div>
        <h1>help编辑器</h1>
        <script id="editor" type="text/plain" style="width:1024px;height:500px;"></script>
    </div>
    <div>
        <button onclick="getContent()">获得内容</button>
    </div>
    <script type="text/javascript">
        //实例化编辑器
        //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
        var ue = UE.getEditor('editor');
        function getContent() {
            var arr = [];
            console.log(UE.getEditor('editor').hasContents());
            if (UE.getEditor('editor').hasContents()){
                arr.push("msg：");
                arr.push(UE.getEditor('editor').getContent());
            }

            //向sayhello.php发起一个异步的Ajax GET请求, 请求超时时间为10s， 请求完成后执行相应的回调。
            UE.ajax.request('./php/data_sql.php', {
                //请求方法。可选值： 'GET', 'POST'，默认值是'POST'
                method: 'POST',
                //超时时间。 默认为5000， 单位是ms
                timeout: 10000,
                //是否是异步请求。 true为异步请求， false为同步请求
                async: true,
                //请求携带的数据。如果请求为GET请求， data会经过stringify后附加到请求url之后。
                data: arr[1],
                dataType:'json',
                //请求成功后的回调， 该回调接受当前的XMLHttpRequest对象作为参数。
                onsuccess: function ( data ) {
                    console.log( "上传成功！！！" );
                    console.log( "heheh:" + data.toString() );
                },
                //请求失败或者超时后的回调。
                onerror: function ( xhr ) {
                    alert( 'Ajax请求失败' );
                }
            });


            // alert(arr.join("\n"));
        }

    </script>
</body>
</html>